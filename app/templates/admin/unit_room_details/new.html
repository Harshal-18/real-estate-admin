{% extends "admin/base.html" %}

{% block title %}Add Unit Room Detail - Admin Panel{% endblock %}
{% block page_title %}Add New Unit Room Detail{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin-enhanced.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
.section-header {
    border-left: 4px solid #667eea;
    padding-left: 15px;
    margin: 20px 0 15px 0;
    background: linear-gradient(135deg, rgba(102,126,234,0.05) 0%, rgba(118,75,162,0.05) 100%);
    padding: 10px 15px;
    border-radius: 5px;
}
.section-header h6 {
    color: #2c3e50;
    margin: 0;
    font-weight: 600;
}
</style>
{% endblock %}

{% block content %}
<!-- Enhanced Page Header -->
<div class="page-header">
    <div class="container-fluid">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h1><i class="fas fa-home me-3"></i>Add Room Details</h1>
                <p class="mb-0">Create detailed room specifications</p>
            </div>
            <div class="col-md-6">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb justify-content-md-end">
                        <li class="breadcrumb-item"><a href="{{ url_for('admin.dashboard') }}">Dashboard</a></li>
                        <li class="breadcrumb-item"><a href="{{ url_for('admin.unit_room_details') }}">Room Details</a></li>
                        <li class="breadcrumb-item active">New</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="luxury-card">
                <div class="card-header">
                    <h5><i class="fas fa-plus-circle"></i>Room Information</h5>
                </div>
                <div class="card-body">
                    <form method="POST" class="luxury-form">
                        <!-- Unit Type Selection -->
                        <div class="row mb-4">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="unit_type_id" class="form-label">
                                        <i class="fas fa-building"></i>Unit Type
                                    </label>
                                    <select class="form-select" id="unit_type_id" name="unit_type_id" required>
                                        <option value="">Select Unit Type</option>
                                        {% for ut in unit_types %}
                                        <option value="{{ ut.unit_type_id }}">{{ ut.type_name }}</option>
                                        {% endfor %}
                                    </select>
                                    <small class="text-muted">Choose the unit type for this room</small>
                                </div>
                            </div>
                        </div>

                        <!-- Basic Room Information -->
                        <div class="section-header">
                            <h6><i class="fas fa-door-open"></i> Basic Room Information</h6>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="form-group">
                                    <label for="room_type" class="form-label">
                                        <i class="fas fa-layer-group"></i>Room Type
                                    </label>
                                    <select class="form-select" id="room_type" name="room_type" required>
                                        <option value="">Select Room Type</option>
                                        <option value="Bedroom">Bedroom</option>
                                        <option value="Living Room">Living Room</option>
                                        <option value="Kitchen">Kitchen</option>
                                        <option value="Bathroom">Bathroom</option>
                                        <option value="Balcony">Balcony</option>
                                        <option value="Dining Room">Dining Room</option>
                                        <option value="Study Room">Study Room</option>
                                        <option value="Utility Room">Utility Room</option>
                                        <option value="Store Room">Store Room</option>
                                    </select>
                                    <small class="text-muted">Type of room (bedroom, kitchen, etc.)</small>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="form-group">
                                    <label for="room_name" class="form-label">
                                        <i class="fas fa-tag"></i>Room Name
                                    </label>
                                    <input type="text" class="form-control" id="room_name" name="room_name" 
                                           placeholder="e.g., Master Bedroom, Guest Room">
                                    <small class="text-muted">Specific name for this room</small>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="form-group">
                                    <label for="room_sequence" class="form-label">
                                        <i class="fas fa-sort-numeric-up"></i>Sequence
                                    </label>
                                    <input type="number" class="form-control" id="room_sequence" name="room_sequence" 
                                           placeholder="1" min="1">
                                    <small class="text-muted">Display order of this room</small>
                                </div>
                            </div>
                        </div>

                        <!-- Room Dimensions -->
                        <div class="section-header">
                            <h6><i class="fas fa-ruler-combined"></i> Room Dimensions</h6>
                        </div>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="room_length" class="form-label">
                                        <i class="fas fa-arrows-alt-h"></i>Length
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" step="0.01" class="form-control" id="room_length" 
                                               name="room_length" placeholder="0.00" min="0">
                                        <span class="input-unit">ft</span>
                                    </div>
                                    <small class="text-muted">Room length in feet</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="room_width" class="form-label">
                                        <i class="fas fa-arrows-alt-v"></i>Width
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" step="0.01" class="form-control" id="room_width" 
                                               name="room_width" placeholder="0.00" min="0">
                                        <span class="input-unit">ft</span>
                                    </div>
                                    <small class="text-muted">Room width in feet</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="room_area" class="form-label">
                                        <i class="fas fa-expand-arrows-alt"></i>Area
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" step="0.01" class="form-control" id="room_area" 
                                               name="room_area" placeholder="0.00" min="0" readonly>
                                        <span class="input-unit">sq ft</span>
                                    </div>
                                    <small class="text-muted">Auto-calculated from length Ã— width</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="room_shape" class="form-label">
                                        <i class="fas fa-shapes"></i>Shape
                                    </label>
                                    <select class="form-select" id="room_shape" name="room_shape">
                                        <option value="">Select Shape</option>
                                        <option value="Rectangle">Rectangle</option>
                                        <option value="Square">Square</option>
                                        <option value="L-shaped">L-shaped</option>
                                        <option value="Circular">Circular</option>
                                        <option value="Oval">Oval</option>
                                        <option value="Irregular">Irregular</option>
                                    </select>
                                    <small class="text-muted">Geometric shape of the room</small>
                                </div>
                            </div>
                        </div>

                        <!-- Room Features -->
                        <div class="section-header">
                            <h6><i class="fas fa-cogs"></i> Room Features</h6>
                        </div>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="has_attached_bathroom" class="form-label">
                                        <i class="fas fa-bath"></i>Attached Bathroom
                                    </label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="has_attached_bathroom" name="has_attached_bathroom">
                                        <label class="form-check-label" for="has_attached_bathroom">Available</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="has_balcony_access" class="form-label">
                                        <i class="fas fa-door-open"></i>Balcony Access
                                    </label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="has_balcony_access" name="has_balcony_access">
                                        <label class="form-check-label" for="has_balcony_access">Available</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="has_wardrobe" class="form-label">
                                        <i class="fas fa-archive"></i>Wardrobe
                                    </label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="has_wardrobe" name="has_wardrobe">
                                        <label class="form-check-label" for="has_wardrobe">Available</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="wardrobe_type" class="form-label">
                                        <i class="fas fa-archive"></i>Wardrobe Type
                                    </label>
                                    <select class="form-select" id="wardrobe_type" name="wardrobe_type">
                                        <option value="">Select Type</option>
                                        <option value="Built-in">Built-in</option>
                                        <option value="Walk-in">Walk-in</option>
                                        <option value="Sliding">Sliding</option>
                                        <option value="Modular">Modular</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="wardrobe_area" class="form-label">
                                        <i class="fas fa-expand-arrows-alt"></i>Wardrobe Area
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" step="0.01" class="form-control" id="wardrobe_area" 
                                               name="wardrobe_area" placeholder="0.00" min="0">
                                        <span class="input-unit">sq ft</span>
                                    </div>
                                    <small class="text-muted">Area occupied by wardrobe</small>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="position_in_unit" class="form-label">
                                        <i class="fas fa-location-arrow"></i>Position in Unit
                                    </label>
                                    <select class="form-select" id="position_in_unit" name="position_in_unit">
                                        <option value="">Select Position</option>
                                        <option value="Front">Front</option>
                                        <option value="Back">Back</option>
                                        <option value="Center">Center</option>
                                        <option value="Left">Left</option>
                                        <option value="Right">Right</option>
                                        <option value="Corner">Corner</option>
                                    </select>
                                    <small class="text-muted">Room position within the unit</small>
                                </div>
                            </div>
                        </div>

                        <!-- Windows & Doors -->
                        <div class="section-header">
                            <h6><i class="fas fa-window-maximize"></i> Windows & Doors</h6>
                        </div>
                        <div class="row">
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="has_window" class="form-label">
                                        <i class="fas fa-window-maximize"></i>Has Windows
                                    </label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="has_window" name="has_window">
                                        <label class="form-check-label" for="has_window">Yes</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="window_count" class="form-label">
                                        <i class="fas fa-hashtag"></i>Window Count
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" class="form-control" id="window_count" name="window_count" 
                                               placeholder="0" min="0">
                                        <span class="input-unit">units</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="window_total_area" class="form-label">
                                        <i class="fas fa-expand-arrows-alt"></i>Total Window Area
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" step="0.01" class="form-control" id="window_total_area" 
                                               name="window_total_area" placeholder="0.00" min="0">
                                        <span class="input-unit">sq ft</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="window_type" class="form-label">
                                        <i class="fas fa-window-maximize"></i>Window Type
                                    </label>
                                    <select class="form-select" id="window_type" name="window_type">
                                        <option value="">Select Type</option>
                                        <option value="Sliding">Sliding</option>
                                        <option value="Casement">Casement</option>
                                        <option value="French">French</option>
                                        <option value="Bay">Bay</option>
                                        <option value="Fixed">Fixed</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="window_material" class="form-label">
                                        <i class="fas fa-hammer"></i>Window Material
                                    </label>
                                    <select class="form-select" id="window_material" name="window_material">
                                        <option value="">Select Material</option>
                                        <option value="Aluminum">Aluminum</option>
                                        <option value="UPVC">UPVC</option>
                                        <option value="Wood">Wood</option>
                                        <option value="Steel">Steel</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="window_width" class="form-label">
                                        <i class="fas fa-arrows-alt-h"></i>Window Width
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" step="0.01" class="form-control" id="window_width" 
                                               name="window_width" placeholder="0.00" min="0">
                                        <span class="input-unit">ft</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="window_height" class="form-label">
                                        <i class="fas fa-arrows-alt-v"></i>Window Height
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" step="0.01" class="form-control" id="window_height" 
                                               name="window_height" placeholder="0.00" min="0">
                                        <span class="input-unit">ft</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="door_count" class="form-label">
                                        <i class="fas fa-hashtag"></i>Door Count
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" class="form-control" id="door_count" name="door_count" 
                                               placeholder="0" min="0">
                                        <span class="input-unit">units</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="door_type" class="form-label">
                                        <i class="fas fa-door-open"></i>Door Type
                                    </label>
                                    <select class="form-select" id="door_type" name="door_type">
                                        <option value="">Select Type</option>
                                        <option value="Single">Single</option>
                                        <option value="Double">Double</option>
                                        <option value="Sliding">Sliding</option>
                                        <option value="Folding">Folding</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="door_material" class="form-label">
                                        <i class="fas fa-hammer"></i>Door Material
                                    </label>
                                    <select class="form-select" id="door_material" name="door_material">
                                        <option value="">Select Material</option>
                                        <option value="Wood">Wood</option>
                                        <option value="Glass">Glass</option>
                                        <option value="Metal">Metal</option>
                                        <option value="Composite">Composite</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="door_width" class="form-label">
                                        <i class="fas fa-arrows-alt-h"></i>Door Width
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" step="0.01" class="form-control" id="door_width" 
                                               name="door_width" placeholder="0.00" min="0">
                                        <span class="input-unit">ft</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <div class="form-group">
                                    <label for="door_height" class="form-label">
                                        <i class="fas fa-arrows-alt-v"></i>Door Height
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" step="0.01" class="form-control" id="door_height" 
                                               name="door_height" placeholder="0.00" min="0">
                                        <span class="input-unit">ft</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Environment & Quality -->
                        <div class="section-header">
                            <h6><i class="fas fa-sun"></i> Environment & Quality</h6>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="form-group">
                                    <label for="natural_light_rating" class="form-label">
                                        <i class="fas fa-sun"></i>Natural Light Rating
                                    </label>
                                    <select class="form-select" id="natural_light_rating" name="natural_light_rating">
                                        <option value="">Select Rating</option>
                                        <option value="Excellent">Excellent</option>
                                        <option value="Good">Good</option>
                                        <option value="Average">Average</option>
                                        <option value="Poor">Poor</option>
                                    </select>
                                    <small class="text-muted">Quality of natural lighting</small>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="form-group">
                                    <label for="ventilation_rating" class="form-label">
                                        <i class="fas fa-wind"></i>Ventilation Rating
                                    </label>
                                    <select class="form-select" id="ventilation_rating" name="ventilation_rating">
                                        <option value="">Select Rating</option>
                                        <option value="Excellent">Excellent</option>
                                        <option value="Good">Good</option>
                                        <option value="Average">Average</option>
                                        <option value="Poor">Poor</option>
                                    </select>
                                    <small class="text-muted">Quality of air circulation</small>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="form-group">
                                    <label for="privacy_level" class="form-label">
                                        <i class="fas fa-eye-slash"></i>Privacy Level
                                    </label>
                                    <select class="form-select" id="privacy_level" name="privacy_level">
                                        <option value="">Select Level</option>
                                        <option value="High">High</option>
                                        <option value="Medium">Medium</option>
                                        <option value="Low">Low</option>
                                    </select>
                                    <small class="text-muted">Level of privacy in this room</small>
                                </div>
                            </div>
                        </div>

                        <!-- Electrical & Utilities -->
                        <div class="section-header">
                            <h6><i class="fas fa-plug"></i> Electrical & Utilities</h6>
                        </div>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="electrical_points" class="form-label">
                                        <i class="fas fa-plug"></i>Electrical Points
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" class="form-control" id="electrical_points" 
                                               name="electrical_points" placeholder="0" min="0">
                                        <span class="input-unit">points</span>
                                    </div>
                                    <small class="text-muted">Number of power outlets</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="fan_points" class="form-label">
                                        <i class="fas fa-fan"></i>Fan Points
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" class="form-control" id="fan_points" 
                                               name="fan_points" placeholder="0" min="0">
                                        <span class="input-unit">points</span>
                                    </div>
                                    <small class="text-muted">Number of ceiling fan connections</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="ac_points" class="form-label">
                                        <i class="fas fa-snowflake"></i>AC Points
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" class="form-control" id="ac_points" 
                                               name="ac_points" placeholder="0" min="0">
                                        <span class="input-unit">points</span>
                                    </div>
                                    <small class="text-muted">Number of AC connections</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="light_points" class="form-label">
                                        <i class="fas fa-lightbulb"></i>Light Points
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" class="form-control" id="light_points" 
                                               name="light_points" placeholder="0" min="0">
                                        <span class="input-unit">points</span>
                                    </div>
                                    <small class="text-muted">Number of lighting connections</small>
                                </div>
                            </div>
                        </div>

                        <!-- Special Features -->
                        <div class="section-header">
                            <h6><i class="fas fa-star"></i> Special Features</h6>
                        </div>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="has_geyser_provision" class="form-label">
                                        <i class="fas fa-thermometer-half"></i>Geyser Provision
                                    </label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="has_geyser_provision" name="has_geyser_provision">
                                        <label class="form-check-label" for="has_geyser_provision">Available</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="has_exhaust_fan" class="form-label">
                                        <i class="fas fa-fan"></i>Exhaust Fan
                                    </label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="has_exhaust_fan" name="has_exhaust_fan">
                                        <label class="form-check-label" for="has_exhaust_fan">Available</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="has_chimney_provision" class="form-label">
                                        <i class="fas fa-industry"></i>Chimney Provision
                                    </label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="has_chimney_provision" name="has_chimney_provision">
                                        <label class="form-check-label" for="has_chimney_provision">Available</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Finishes -->
                        <div class="section-header">
                            <h6><i class="fas fa-paint-brush"></i> Finishes & Materials</h6>
                        </div>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="flooring_type" class="form-label">
                                        <i class="fas fa-square"></i>Flooring Type
                                    </label>
                                    <select class="form-select" id="flooring_type" name="flooring_type">
                                        <option value="">Select Type</option>
                                        <option value="Vitrified Tiles">Vitrified Tiles</option>
                                        <option value="Marble">Marble</option>
                                        <option value="Granite">Granite</option>
                                        <option value="Wooden">Wooden</option>
                                        <option value="Ceramic">Ceramic</option>
                                        <option value="Laminate">Laminate</option>
                                    </select>
                                    <small class="text-muted">Type of floor material</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="flooring_brand" class="form-label">
                                        <i class="fas fa-tag"></i>Flooring Brand
                                    </label>
                                    <input type="text" class="form-control" id="flooring_brand" name="flooring_brand" 
                                           placeholder="Brand name">
                                    <small class="text-muted">Brand or manufacturer</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="ceiling_type" class="form-label">
                                        <i class="fas fa-square"></i>Ceiling Type
                                    </label>
                                    <select class="form-select" id="ceiling_type" name="ceiling_type">
                                        <option value="">Select Type</option>
                                        <option value="False Ceiling">False Ceiling</option>
                                        <option value="POP">POP</option>
                                        <option value="Gypsum">Gypsum</option>
                                        <option value="Regular">Regular</option>
                                    </select>
                                    <small class="text-muted">Type of ceiling finish</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="form-group">
                                    <label for="ceiling_height" class="form-label">
                                        <i class="fas fa-arrows-alt-v"></i>Ceiling Height
                                    </label>
                                    <div class="input-with-unit">
                                        <input type="number" step="0.01" class="form-control" id="ceiling_height" 
                                               name="ceiling_height" placeholder="0.00" min="0">
                                        <span class="input-unit">ft</span>
                                    </div>
                                    <small class="text-muted">Height from floor to ceiling</small>
                                </div>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="form-actions mt-4 text-end">
                            <a href="{{ url_for('admin.unit_room_details') }}" class="btn btn-outline-secondary me-2">
                                <i class="fas fa-times me-1"></i>Cancel
                            </a>
                            <button type="submit" class="btn btn-luxury">
                                <i class="fas fa-plus me-1"></i>Add Room Detail
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Auto-calculate room area
    const lengthInput = document.getElementById('room_length');
    const widthInput = document.getElementById('room_width');
    const areaInput = document.getElementById('room_area');
    
    function calculateArea() {
        const length = parseFloat(lengthInput.value) || 0;
        const width = parseFloat(widthInput.value) || 0;
        const area = length * width;
        areaInput.value = area > 0 ? area.toFixed(2) : '';
    }
    
    lengthInput.addEventListener('input', calculateArea);
    widthInput.addEventListener('input', calculateArea);
    
    // Toggle wardrobe fields based on has_wardrobe checkbox
    const hasWardrobeCheckbox = document.getElementById('has_wardrobe');
    const wardrobeTypeSelect = document.getElementById('wardrobe_type');
    const wardrobeAreaInput = document.getElementById('wardrobe_area');
    
    hasWardrobeCheckbox.addEventListener('change', function() {
        if (this.checked) {
            wardrobeTypeSelect.disabled = false;
            wardrobeAreaInput.disabled = false;
        } else {
            wardrobeTypeSelect.disabled = true;
            wardrobeAreaInput.disabled = true;
            wardrobeTypeSelect.value = '';
            wardrobeAreaInput.value = '';
        }
    });
    
    // Toggle window fields based on has_window checkbox
    const hasWindowCheckbox = document.getElementById('has_window');
    const windowFields = ['window_count', 'window_total_area', 'window_type', 'window_material', 'window_width', 'window_height'];
    
    hasWindowCheckbox.addEventListener('change', function() {
        windowFields.forEach(fieldId => {
            const field = document.getElementById(fieldId);
            if (this.checked) {
                field.disabled = false;
            } else {
                field.disabled = true;
                field.value = '';
            }
        });
    });
    
    // Form validation
    const form = document.querySelector('form');
    form.addEventListener('submit', function(e) {
        const roomType = document.getElementById('room_type').value;
        const roomName = document.getElementById('room_name').value;
        
        if (!roomType) {
            e.preventDefault();
            alert('Please select a room type');
            return;
        }
        
        if (!roomName.trim()) {
            e.preventDefault();
            alert('Please enter a room name');
            return;
        }
        
        // Validate dimensions if provided
        const length = parseFloat(lengthInput.value) || 0;
        const width = parseFloat(widthInput.value) || 0;
        
        if ((length > 0 && width <= 0) || (width > 0 && length <= 0)) {
            e.preventDefault();
            alert('Please provide both length and width for proper area calculation');
            return;
        }
    });
    
    // Initialize disabled states
    hasWardrobeCheckbox.dispatchEvent(new Event('change'));
    hasWindowCheckbox.dispatchEvent(new Event('change'));
});
</script>
{% endblock %}